# G-FIRE Assist: 소화기 사용법 코칭 및 화재 대응 보조 시스템

이 프로젝트는 화재 발생 시 초기 대응 능력을 향상시키기 위한 "G-FIRE Assist" 시스템의 프로토타입입니다. MODI+ 모듈과 클라이언트-서버 아키텍처를 활용하여 소화기 사용법을 음성으로 안내하고, 위험 상황을 알리는 것을 목표로 합니다.

## 주요 기능

- **소화기 찾기 (Locator):** `client.py`의 버튼을 누르면 MODI 스피커에서 "삐-삐-" 소리를 내어 어두운 곳에서도 소화기 위치를 쉽게 찾을 수 있습니다.
- **음성 코칭 (TTS Coaching):** 사용자가 소화기를 집고 특정 동작(회전, 흔들기 등)을 취하면, `server.py`가 해당 단계에 맞는 음성 안내(예: "안전핀을 뽑으세요")를 원격으로 재생해줍니다.
- **클라이언트-서버 구조:**
    - **`client.py` (MODI+ 연동 기기):** 소화기에 부착된 IMU, 버튼, 스피커 모듈을 제어합니다. 사용자 행동을 감지하여 서버에 API 요청을 보냅니다.
    - **`server.py` (중앙 서버):** `client.py`의 요청을 받아, 상황에 맞는 자세한 음성 안내를 스피커로 송출합니다.

## 시스템 요구사항

- Python 3.10+
- `uv` (Python 패키지 설치 및 관리 도구)
- MODI+ Expert Kit (IMU, Button, Speaker 모듈 포함)

## 설치 및 실행 방법

### 1. 프로젝트 복제 및 의존성 설치

먼저, 프로젝트를 다운로드하고 `uv`를 사용하여 필요한 라이브러리를 설치합니다.

```bash
git clone <repository-url>
cd solid-doodle
# pyproject.toml 기반으로 모든 의존성 설치
uv sync
```
*참고: `pyproject.toml`에 모든 의존성이 명시되어 있습니다.*

### 2. 사운드 서버 실행 (PC/서버 기기)

이 기기는 음성 안내를 출력할 메인 컴퓨터입니다.

**A. 서버 주소 확인**

클라이언트가 접속할 서버의 주소를 알아야 합니다.

- **로컬 네트워크:** `hostname -I` 명령어로 서버의 IP 주소를 확인합니다. (예: `192.168.1.10`)
- **ngrok 사용 시:** `ngrok`이 생성해준 forwarding 주소를 확인합니다. (예: `https://1a2b-3c4d-5e6f.ngrok.io`)

**B. 서버 실행**

다음 명령어로 사운드 서버를 시작합니다. 서버가 시작되면 필요한 TTS 음성 파일을 자동으로 생성합니다.

```bash
python server.py
```

### 3. 클라이언트 실행 (MODI+ 연동 기기)

이 기기는 MODI+ 모듈이 연결된 장치입니다. (예: Raspberry Pi)

**A. `client.py` 준비**

`client.py` 파일을 이 기기로 복사하고, 필요한 라이브러리를 설치합니다.

```bash
pip install pymodi-plus requests
```

**B. 클라이언트 실행**

`client.py`를 실행하면 서버의 전체 주소를 입력하라는 메시지가 표시됩니다.

```bash
python client.py
```

처음 실행 시, **2-A 단계**에서 확인한 전체 서버 주소(예: `http://192.168.1.10:8000` 또는 `https://1a2b-3c4d-5e6f.ngrok.io`)를 입력하고 Enter를 누릅니다. 입력된 주소는 `client_config.json` 파일에 저장됩니다.

두 번째 실행부터는 저장된 주소를 사용할지 묻는 메시지가 나타납니다. Enter를 누르면 저장된 주소를 사용하고, 'n'을 입력하면 새 주소를 입력할 수 있습니다.

## 기타 파일

- **`safeknob.py`**: 문 손잡이의 온도를 감지하여 위험도를 표시하는 "SafeKnob" 모듈의 로직을 포함하고 있습니다. (별도 실행)
